<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">

    

    <title>
       
    </title>

    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    
      <meta name="author" content="Pocket Games">
    
    
      <meta name="description" content="SDK-Android接入指南一、概述本文档用于指导游戏公司快速接入pocket手游SDK，本SDK为安卓游戏提供登录、注册、快速注册、支付等功能。本文档面向的读者是安卓游戏开发者，包括客户端和服务器。
二、运行环境此版本sdk需要在jdk1.7上运行，要求android sdk版本为19或者以上
三、导入PocketSDK资源包
将PocketGamesSDK文件夹导入工程。
将facebook">
    

    <meta name="description" content="SDK-Android接入指南一、概述本文档用于指导游戏公司快速接入pocket手游SDK，本SDK为安卓游戏提供登录、注册、快速注册、支付等功能。本文档面向的读者是安卓游戏开发者，包括客户端和服务器。
二、运行环境此版本sdk需要在jdk1.7上运行，要求android sdk版本为19或者以上
三、导入PocketSDK资源包
将PocketGamesSDK文件夹导入工程。
将facebook">
<meta property="og:type" content="website">
<meta property="og:title" content="PocketSDK">
<meta property="og:url" content="http://yoursite.com/Documents/index.html">
<meta property="og:site_name" content="PocketSDK">
<meta property="og:description" content="SDK-Android接入指南一、概述本文档用于指导游戏公司快速接入pocket手游SDK，本SDK为安卓游戏提供登录、注册、快速注册、支付等功能。本文档面向的读者是安卓游戏开发者，包括客户端和服务器。
二、运行环境此版本sdk需要在jdk1.7上运行，要求android sdk版本为19或者以上
三、导入PocketSDK资源包
将PocketGamesSDK文件夹导入工程。
将facebook">
<meta property="og:image" content="http://i1.tietuku.com/e6645db27f997958.png">
<meta property="og:image" content="http://i1.tietuku.com/9e0a8d7ebea2b036.png">
<meta property="og:updated_time" content="2015-10-14T09:32:27.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="PocketSDK">
<meta name="twitter:description" content="SDK-Android接入指南一、概述本文档用于指导游戏公司快速接入pocket手游SDK，本SDK为安卓游戏提供登录、注册、快速注册、支付等功能。本文档面向的读者是安卓游戏开发者，包括客户端和服务器。
二、运行环境此版本sdk需要在jdk1.7上运行，要求android sdk版本为19或者以上
三、导入PocketSDK资源包
将PocketGamesSDK文件夹导入工程。
将facebook">
    
    
    
      <link rel="icon" type="image/x-icon" href="/images/favicon.png">
    
    <link rel="stylesheet" href="/css/uno.css" type="text/css">

    <link rel="stylesheet" href="/css/xcode.css">

    <script src="/js/jquery.min.js"></script>

</head>
<body>

    <span class="mobile btn-mobile-menu">
        <i class="icon icon-list btn-mobile-menu__icon"></i>
        <i class="icon icon-x-circle btn-mobile-close__icon hidden"></i>
    </span>

    

<header class="panel-cover panel-cover--collapsed">



  <div class="panel-main">

    <div class="panel-main__inner panel-inverted">
    <div class="panel-main__content">

        
        <a href="https://pocket-sdk.github.io" title="link to homepage for PocketSDK"><img src="/images/favicon.png" width="80" alt="PocketSDK logo" class="panel-cover__logo logo" /></a>
        

        <h1 class="panel-cover__title panel-title"><a href="/" title="link to homepage">PocketSDK</a></h1>

        <span class="panel-cover__subtitle panel-subtitle">Android</span>

        <hr class="panel-cover__divider" />
        <p class="panel-cover__description">
          千奇网络科技
        </p>
        <hr class="panel-cover__divider panel-cover__divider--secondary" />

        <div class="navigation-wrapper">

          <nav class="cover-navigation cover-navigation--primary">
            <ul class="navigation">

              
                
                <li class="navigation__item"><a href="/#blog" title="" class="blog-button">日志</a></li>
              
                
                <li class="navigation__item"><a href="/Documents" title="" class="">文档</a></li>
              
                
                <li class="navigation__item"><a href="/Download" title="" class="">下载</a></li>
              

            </ul>
          </nav>

          <!-- ----------------------------
To add a new social icon simply duplicate one of the list items from below
and change the class in the <i> tag to match the desired social network
and then add your link to the <a>. Here is a full list of social network
classes that you can use:

    icon-social-500px
    icon-social-behance
    icon-social-delicious
    icon-social-designer-news
    icon-social-deviant-art
    icon-social-digg
    icon-social-dribbble
    icon-social-facebook
    icon-social-flickr
    icon-social-forrst
    icon-social-foursquare
    icon-social-github
    icon-social-google-plus
    icon-social-hi5
    icon-social-instagram
    icon-social-lastfm
    icon-social-linkedin
    icon-social-medium
    icon-social-myspace
    icon-social-path
    icon-social-pinterest
    icon-social-rdio
    icon-social-reddit
    icon-social-skype
    icon-social-spotify
    icon-social-stack-overflow
    icon-social-steam
    icon-social-stumbleupon
    icon-social-treehouse
    icon-social-tumblr
    icon-social-twitter
    icon-social-vimeo
    icon-social-xbox
    icon-social-yelp
    icon-social-youtube
    icon-social-zerply
    icon-mail

------------------------------ -->

        </div>

      </div>

    </div>

    <div class="panel-cover--overlay"></div>
  </div>
</header>

    <div class="content-wrapper">
        <div class="content-wrapper__inner entry">
            

  <article class="post-container post-container--single">

    <header class="post-header">
    
      

      <h1 class="post-title"></h1>
    </header>

    <section class="post">
      <h1 id="SDK-Android接入指南">SDK-Android接入指南</h1><h2 id="一、概述">一、概述</h2><p>本文档用于指导游戏公司快速接入pocket手游SDK，本SDK为安卓游戏提供登录、注册、快速注册、支付等功能。本文档面向的读者是安卓游戏开发者，包括客户端和服务器。</p>
<h2 id="二、运行环境">二、运行环境</h2><p>此版本sdk需要在jdk1.7上运行，要求android sdk版本为19或者以上</p>
<h2 id="三、导入PocketSDK资源包">三、导入PocketSDK资源包</h2><ul>
<li>将PocketGamesSDK文件夹导入工程。</li>
<li>将facebook文件夹导入工程。</li>
<li><p>将google-play-services_lib文件夹导入工程。</p>
<p>  <img src="http://i1.tietuku.com/e6645db27f997958.png" alt=""></p>
</li>
<li><p>游戏应用引用以上库文件 </p>
<p>  <img src="http://i1.tietuku.com/9e0a8d7ebea2b036.png" alt=""></p>
</li>
<li><p>将sdk提供的<em>assets</em>文件夹下面的资源拷入游戏项目目录下</p>
</li>
<li><p>拷贝sdk下面的<em>manifest</em>里面的所有<em>activity</em>到项目主目录下的<em>manifest</em>中，以下为实例，以给出的manifest文件中得为准</p>
<pre><code>  <span class="tag">&lt;<span class="title">activity</span>
    <span class="attribute">android:name</span>=<span class="value">"com.pocket.sdk.activity.CGLoginActivity"</span>
    <span class="attribute">android:configChanges</span>=<span class="value">"orientation|keyboardHidden|screenSize"</span>
    <span class="attribute">android:screenOrientation</span>=<span class="value">"landscape"</span>
    <span class="attribute">android:theme</span>=<span class="value">"@android:style/Theme.Translucent.NoTitleBar.Fullscreen"</span>
   /&gt;</span>
 <span class="tag">&lt;<span class="title">activity</span>
    <span class="attribute">android:name</span>=<span class="value">"com.pocket.sdk.activity.CGLoginPortraitActivity"</span>
    <span class="attribute">android:configChanges</span>=<span class="value">"orientation|keyboardHidden|screenSize"</span>
    <span class="attribute">android:screenOrientation</span>=<span class="value">"portrait"</span>
    <span class="attribute">android:theme</span>=<span class="value">"@android:style/Theme.Translucent.NoTitleBar.Fullscreen"</span>
   /&gt;</span>
<span class="tag">&lt;<span class="title">activity</span>
    <span class="attribute">android:name</span>=<span class="value">"com.pocket.sdk.activity.GGBuyByPlatformActivity"</span>
    <span class="attribute">android:configChanges</span>=<span class="value">"orientation|keyboardHidden|screenSize"</span>
    <span class="attribute">android:screenOrientation</span>=<span class="value">"landscape"</span>
    <span class="attribute">android:theme</span>=<span class="value">"@android:style/Theme.Translucent.NoTitleBar.Fullscreen"</span>
 /&gt;</span>
<span class="tag">&lt;<span class="title">activity</span>
    <span class="attribute">android:name</span>=<span class="value">"com.pocket.sdk.activity.SelectChargeTypeActivity"</span>
    <span class="attribute">android:configChanges</span>=<span class="value">"orientation|keyboardHidden|screenSize"</span>
    <span class="attribute">android:screenOrientation</span>=<span class="value">"landscape"</span>
    <span class="attribute">android:theme</span>=<span class="value">"@android:style/Theme.Translucent.NoTitleBar.Fullscreen"</span>
    /&gt;</span>
<span class="tag">&lt;<span class="title">activity</span> 
    <span class="attribute">android:name</span>=<span class="value">"com.pocket.sdk.activity.CGPlatformPayFragmentActivity"</span>
    <span class="attribute">android:configChanges</span>=<span class="value">"orientation|keyboardHidden|screenSize"</span>
    <span class="attribute">android:screenOrientation</span>=<span class="value">"landscape"</span>
    <span class="attribute">android:theme</span>=<span class="value">"@android:style/Theme.Translucent.NoTitleBar.Fullscreen"</span>
    /&gt;</span>
<span class="comment">&lt;!-- 注册页面 --&gt;</span>
<span class="tag">&lt;<span class="title">activity</span>
    <span class="attribute">android:name</span>=<span class="value">"com.pocket.sdk.activity.CGRegisterActivity"</span>
    <span class="attribute">android:theme</span>=<span class="value">"@android:style/Theme.Translucent.NoTitleBar.Fullscreen"</span>
    /&gt;</span>
<span class="comment">&lt;!-- 选择渠道界面 --&gt;</span>
<span class="tag">&lt;<span class="title">activity</span>
    <span class="attribute">android:name</span>=<span class="value">"com.pocket.sdk.activity.CGPayCenterFragmentActivity"</span>
    <span class="attribute">android:configChanges</span>=<span class="value">"orientation|keyboardHidden|screenSize"</span>
    <span class="attribute">android:screenOrientation</span>=<span class="value">"landscape"</span>
    <span class="attribute">android:theme</span>=<span class="value">"@android:style/Theme.Translucent.NoTitleBar.Fullscreen"</span>
    /&gt;</span>
<span class="comment">&lt;!--打开支付网页  --&gt;</span>
<span class="tag">&lt;<span class="title">activity</span>
    <span class="attribute">android:name</span>=<span class="value">"com.pocket.sdk.activity.CGPayWebActivity"</span>
    <span class="attribute">android:theme</span>=<span class="value">"@android:style/Theme.Translucent.NoTitleBar.Fullscreen"</span>
    &gt;</span>
<span class="tag">&lt;/<span class="title">activity</span>&gt;</span>
<span class="comment">&lt;!-- 个认中心界面 --&gt;</span>
<span class="tag">&lt;<span class="title">activity</span>
    <span class="attribute">android:name</span>=<span class="value">"com.pocket.sdk.activity.CGAccountManageActivity"</span>
    <span class="attribute">android:theme</span>=<span class="value">"@android:style/Theme.Translucent.NoTitleBar.Fullscreen"</span>
     /&gt;</span>
<span class="comment">&lt;!-- 忘记密码界面 --&gt;</span>
<span class="tag">&lt;<span class="title">activity</span>
    <span class="attribute">android:name</span>=<span class="value">"com.pocket.sdk.activity.CGForgetPasswActivity"</span>
    <span class="attribute">android:theme</span>=<span class="value">"@style/IntentTheme"</span>
  /&gt;</span>
<span class="comment">&lt;!-- 賬戶忘记密码界面 --&gt;</span>
<span class="tag">&lt;<span class="title">activity</span>
    <span class="attribute">android:name</span>=<span class="value">"com.pocket.sdk.activity.CGModifyPwdActivity"</span>
    <span class="attribute">android:theme</span>=<span class="value">"@android:style/Theme.Translucent.NoTitleBar.Fullscreen"</span>
   /&gt;</span>
<span class="comment">&lt;!-- 賬戶忘记密码界面 --&gt;</span>
<span class="tag">&lt;<span class="title">activity</span>
    <span class="attribute">android:name</span>=<span class="value">"com.pocket.sdk.activity.CGOrderHistoryActivity"</span>
    <span class="attribute">android:theme</span>=<span class="value">"@android:style/Theme.Translucent.NoTitleBar.Fullscreen"</span>
   /&gt;</span>
<span class="comment">&lt;!-- 广告界面 --&gt;</span>
<span class="tag">&lt;<span class="title">activity</span>
    <span class="attribute">android:name</span>=<span class="value">"com.pocket.sdk.activity.CGAdActivity"</span>
    <span class="attribute">android:theme</span>=<span class="value">"@android:style/Theme.Translucent.NoTitleBar.Fullscreen"</span>
     /&gt;</span>

<span class="comment">&lt;!-- 登录暂停页 --&gt;</span>
<span class="tag">&lt;<span class="title">activity</span> 
    <span class="attribute">android:name</span>=<span class="value">"com.pocket.sdk.activity.CGLoginPauseActivity"</span>
    <span class="attribute">android:configChanges</span>=<span class="value">"orientation|keyboardHidden|screenSize"</span>
    <span class="attribute">android:theme</span>=<span class="value">"@android:style/Theme.Translucent.NoTitleBar.Fullscreen"</span>
    /&gt;</span>
<span class="comment">&lt;!-- 消息 --&gt;</span>
<span class="tag">&lt;<span class="title">activity</span> 
    <span class="attribute">android:name</span>=<span class="value">"com.pocket.sdk.activity.CGIntentWebActivity"</span>
    <span class="attribute">android:theme</span>=<span class="value">"@android:style/Theme.Translucent.NoTitleBar.Fullscreen"</span>
    /&gt;</span>
<span class="comment">&lt;!-- 绑定邮箱界面 --&gt;</span>
<span class="tag">&lt;<span class="title">activity</span>
    <span class="attribute">android:name</span>=<span class="value">"com.pocket.sdk.activity.CGBindEmailPwdActivity"</span>
    <span class="attribute">android:theme</span>=<span class="value">"@android:style/Theme.Translucent.NoTitleBar.Fullscreen"</span>
 /&gt;</span>
<span class="tag">&lt;<span class="title">activity</span>
    <span class="attribute">android:name</span>=<span class="value">"com.pocket.sdk.activity.CGBindEmailConfirmActivity"</span>
    <span class="attribute">android:theme</span>=<span class="value">"@android:style/Theme.Translucent.NoTitleBar.Fullscreen"</span>
  /&gt;</span>
<span class="comment">&lt;!-- 绑定账号界面 --&gt;</span>
<span class="tag">&lt;<span class="title">activity</span>
    <span class="attribute">android:name</span>=<span class="value">"com.pocket.sdk.activity.LoginProgressActivity"</span>
    <span class="attribute">android:theme</span>=<span class="value">"@android:style/Theme.Translucent.NoTitleBar.Fullscreen"</span>
  /&gt;</span>
<span class="tag">&lt;<span class="title">activity</span>
    <span class="attribute">android:name</span>=<span class="value">"com.pocket.sdk.activity.CGForgetFragmentActivity"</span>
     <span class="attribute">android:theme</span>=<span class="value">"@android:style/Theme.Translucent.NoTitleBar.Fullscreen"</span>
    /&gt;</span>
<span class="comment">&lt;!-- 客服 --&gt;</span>
<span class="tag">&lt;<span class="title">activity</span>
    <span class="attribute">android:name</span>=<span class="value">"com.pocket.sdk.activity.UserCustomerActivity"</span>
    <span class="attribute">android:theme</span>=<span class="value">"@android:style/Theme.Translucent.NoTitleBar.Fullscreen"</span> /&gt;</span>
 <span class="comment">&lt;!-- 竖版支付 --&gt;</span>
<span class="tag">&lt;<span class="title">activity</span>
    <span class="attribute">android:name</span>=<span class="value">"com.pocket.sdk.activity.PayPortraitActivity"</span>
    <span class="attribute">android:theme</span>=<span class="value">"@android:style/Theme.Translucent.NoTitleBar"</span> /&gt;</span>
<span class="tag">&lt;<span class="title">activity</span>
    <span class="attribute">android:name</span>=<span class="value">"com.pocket.sdk.activity.CardPayPortraitActivity"</span>
    <span class="attribute">android:theme</span>=<span class="value">"@android:style/Theme.Translucent.NoTitleBar"</span> 
    <span class="attribute">android:windowSoftInputMode</span>=<span class="value">"stateHidden|adjustResize"</span>/&gt;</span>
<span class="tag">&lt;<span class="title">activity</span>
    <span class="attribute">android:name</span>=<span class="value">"com.pocket.sdk.activity.OfficialPayPortraitActivity"</span>
    <span class="attribute">android:theme</span>=<span class="value">"@android:style/Theme.Translucent.NoTitleBar"</span> /&gt;</span>

<span class="tag">&lt;<span class="title">meta-data</span>
    <span class="attribute">android:name</span>=<span class="value">"channelID"</span>
    <span class="attribute">android:value</span>=<span class="value">"1"</span> /&gt;</span>
<span class="tag">&lt;<span class="title">meta-data</span> 
    <span class="attribute">android:name</span>=<span class="value">"advChannel"</span>
    <span class="attribute">android:value</span>=<span class="value">"GooglePlay"</span>/&gt;</span>
<span class="tag">&lt;<span class="title">meta-data</span>
    <span class="attribute">android:name</span>=<span class="value">"com.google.android.gms.version"</span>
    <span class="attribute">android:value</span>=<span class="value">"@integer/google_play_services_version"</span> /&gt;</span> 
<span class="comment">&lt;!-- recevier --&gt;</span>
<span class="tag">&lt;<span class="title">receiver</span> 
    <span class="attribute">android:name</span>=<span class="value">"com.pocket.sdk.receiver.TrackingReceiver"</span>
    <span class="attribute">android:exported</span>=<span class="value">"true"</span> &gt;</span>
     <span class="tag">&lt;<span class="title">intent-filter</span>&gt;</span>
        <span class="tag">&lt;<span class="title">action</span> <span class="attribute">android:name</span>=<span class="value">"com.android.vending.INSTALL_REFERRER"</span> /&gt;</span>
    <span class="tag">&lt;/<span class="title">intent-filter</span>&gt;</span>
<span class="tag">&lt;/<span class="title">receiver</span>&gt;</span>

<span class="comment">&lt;!-- facebook --&gt;</span>
 <span class="tag">&lt;<span class="title">activity</span>
    <span class="attribute">android:name</span>=<span class="value">"com.facebook.FacebookActivity"</span>
    <span class="attribute">android:configChanges</span>=<span class="value">"keyboard|keyboardHidden|screenLayout|screenSize|orientation"</span>
    <span class="attribute">android:label</span>=<span class="value">"@string/app_name"</span>
    <span class="attribute">android:theme</span>=<span class="value">"@android:style/Theme.Translucent.NoTitleBar"</span> /&gt;</span>

<span class="tag">&lt;<span class="title">provider</span> <span class="attribute">android:authorities</span>=<span class="value">"com.facebook.app.FacebookContentProvider426352630876651"</span>
  <span class="attribute">android:name</span>=<span class="value">"com.facebook.FacebookContentProvider"</span>
  <span class="attribute">android:exported</span>=<span class="value">"true"</span>/&gt;</span>
<span class="tag">&lt;<span class="title">meta-data</span>
    <span class="attribute">android:name</span>=<span class="value">"com.facebook.sdk.ApplicationId"</span>
    <span class="attribute">android:value</span>=<span class="value">"@string/facebook_SiegeGrazingLandVietnam_app_id"</span> /&gt;</span>
<span class="tag">&lt;<span class="title">service</span> <span class="attribute">android:name</span>=<span class="value">"com.pocket.sdk.service.AppCheckService"</span> /&gt;</span>  
</code></pre></li>
</ul>
<ul>
<li><p>拷贝sdk下面的<em>manifest</em>里面的所有<em>permission</em>到项目主目录下的<em>manifest</em>中</p>
<pre><code>&lt;uses-permission android:<span class="property">name</span>=<span class="string">"com.android.vending.BILLING"</span> /&gt;
&lt;uses-permission android:<span class="property">name</span>=<span class="string">"android.permission.INTERNET"</span> /&gt;
&lt;uses-permission android:<span class="property">name</span>=<span class="string">"android.permission.SYSTEM_ALERT_WINDOW"</span> /&gt;
&lt;uses-permission android:<span class="property">name</span>=<span class="string">"android.permission.ACCESS_NETWORK_STATE"</span> /&gt;
&lt;uses-permission android:<span class="property">name</span>=<span class="string">"android.permission.ACCESS_WIFI_STATE"</span> /&gt;
&lt;uses-permission android:<span class="property">name</span>=<span class="string">"android.permission.READ_PHONE_STATE"</span> /&gt;
&lt;uses-permission android:<span class="property">name</span>=<span class="string">"android.permission.WRITE_EXTERNAL_STORAGE"</span> /&gt;
&lt;uses-permission android:<span class="property">name</span>=<span class="string">"android.permission.MOUNT_UNMOUNT_FILESYSTEMS"</span> /&gt;
&lt;uses-permission android:<span class="property">name</span>=<span class="string">"android.permission.READ_LOGS"</span> /&gt;
&lt;uses-permission android:<span class="property">name</span>=<span class="string">"android.permission.ACCESS_COARSE_LOCATION"</span> /&gt;
&lt;uses-permission android:<span class="property">name</span>=<span class="string">"android.permission.GET_TASKS"</span> /&gt;
&lt;uses-permission android:<span class="property">name</span>=<span class="string">"android.permission.INTERACT_ACROSS_USERS_FULL"</span>/&gt;
</code></pre><p>  <strong>注意事项:</strong></p>
<p>  <strong>①.确保assets下面的文件全部替换，没有以前的残余文件<br>  ②.确保配置为参数文档中的最新参数<br>  ③.根据提供的参数设置好<em>meta-data</em>中得<em>channelID</em>（平台提供的渠道id）和<em>advChannel</em>（平台提供的渠道名称）<br>  ④.在provider中修改<em>authorities</em>结尾的facebook提供的<em>appid</em>为正确值</strong></p>
</li>
</ul>
<h2 id="四、PocketSDK开放接口">四、PocketSDK开放接口</h2><pre><code><span class="comment">/*获取sdk实力对象*/</span>
<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> PocketGamesSDK <span class="title">getInstance</span><span class="params">()</span></span>{}；

<span class="comment">//使用实例</span>
PocketGamesSDK.getInstance()；


<span class="comment">/*
 * 初始化sdk方法
 * @param url                平台分配的请求url
 * @param appId            平台分配的appid
 * @param appKey            平台分配的appkey
 * @param context            依附context
 * @return            返回sdk实例对象
 */</span>    
<span class="function"><span class="keyword">public</span> PocketGamesSDK <span class="title">initSDK</span><span class="params">(String url, <span class="keyword">int</span> appId, String appKey,<span class="keyword">final</span> Context context)</span>；

<span class="comment">//使用实例</span>
PocketGamesSDK.<span class="title">getInstance</span><span class="params">()</span>.<span class="title">initSDK</span><span class="params">(<span class="string">"http://sdk-test.changic.net.cn:8191/pocketgames/"</span>, <span class="number">1020</span>, <span class="string">"89646e72-f06e-4756-8352-cf779b7ea0ae"</span>, <span class="keyword">this</span>)</span></span>;


<span class="comment">/*
 * 设置打印日志开关
 * @param  isDebug  调试开关
 */</span>
<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setDebug</span><span class="params">(<span class="keyword">boolean</span> isDebug)</span>

<span class="comment">//使用实例</span>
PocketGamesSDK.<span class="title">getInstance</span><span class="params">()</span>.<span class="title">setDebug</span><span class="params">(<span class="keyword">true</span>)</span></span>;<span class="comment">//此处true为开启</span>

<span class="comment">/*
 * 设置sdk横竖屏
 * @param drection 方向         PocketGamesSDK.LANDSCAPE  横屏
 *                               PocketGamesSDK.PORTRAIT   竖屏
 */</span>
 <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setDrection</span><span class="params">(<span class="keyword">int</span> drection)</span>；

 <span class="comment">//使用实例</span>
 PocketGamesSDK.<span class="title">getInstance</span><span class="params">()</span>.<span class="title">setDrection</span><span class="params">(PocketGamesSDK.PORTRAIT)</span></span>;


<span class="comment">/*
 * 设置游戏回调监听
 * @param callback 回调，由接入主类实现接口
 */</span>
<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">addGameListener</span><span class="params">(IDispatcherGameCallback callback)</span>

<span class="comment">//使用实例</span>
PocketGamesSDK.<span class="title">addGameListener</span><span class="params">(<span class="keyword">this</span>)</span></span>; 


<span class="comment">/*
 * 自动登录
 */</span>
<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">autoLogin</span><span class="params">()</span>；

<span class="comment">//使用实例</span>
PocketGamesSDK.<span class="title">getInstance</span><span class="params">()</span>.<span class="title">autoLogin</span><span class="params">()</span>；


<span class="comment">/*
 * 绑定区服
 * @param zoneId 服务器Id
 * @param roleId 角色Id
 * @param level  角色等级
 */</span>
<span class="keyword">public</span> <span class="keyword">void</span> <span class="title">bindZone</span><span class="params">(String zoneId, String roleId, String level)</span>；

<span class="comment">//使用实例</span>
PocketGamesSDK.<span class="title">getInstance</span><span class="params">()</span>.<span class="title">bindZone</span><span class="params">(zoneId,roleId,level)</span>；


<span class="comment">/*
 * 打开登录界面
 */</span>
<span class="keyword">public</span> <span class="keyword">void</span> <span class="title">showLogin</span><span class="params">()</span>；

<span class="comment">//使用实例</span>
PocketGamesSDK.<span class="title">getInstance</span><span class="params">()</span>.<span class="title">showLogin</span><span class="params">()</span>；


<span class="comment">/*
 * 打开支付界面
 */</span>
<span class="keyword">public</span> <span class="keyword">void</span> <span class="title">showPayment</span><span class="params">()</span>；

<span class="comment">//使用实例</span>
PocketGamesSDK.<span class="title">getInstance</span><span class="params">()</span>.<span class="title">showPayment</span><span class="params">()</span>；


<span class="comment">/*
 * 显示悬浮框
 */</span>
<span class="keyword">public</span> <span class="keyword">void</span> <span class="title">showGameBar</span><span class="params">()</span>；

<span class="comment">//使用实例</span>
PocketGamesSDK.<span class="title">getInstance</span><span class="params">()</span>.<span class="title">showGameBar</span><span class="params">()</span>；


<span class="comment">/*
 * 关闭悬浮框
 */</span>
<span class="keyword">public</span> <span class="keyword">void</span> <span class="title">closeGameBar</span><span class="params">()</span>；

<span class="comment">//使用实例</span>
PocketGamesSDK.<span class="title">getInstance</span><span class="params">()</span>.<span class="title">closeGameBar</span><span class="params">()</span>；


<span class="comment">/*
 * 退出游戏接口
 */</span>
<span class="keyword">public</span> <span class="keyword">void</span> <span class="title">logout</span><span class="params">()</span>；

<span class="comment">//使用实例</span>
PocketGamesSDK.<span class="title">getInstance</span><span class="params">()</span>.<span class="title">logout</span><span class="params">()</span>；


<span class="comment">/*
 * 销毁sdk接口
 */</span>
<span class="keyword">public</span> <span class="keyword">void</span> <span class="title">destroySDK</span><span class="params">()</span>；

<span class="comment">//使用实例</span>
PocketGamesSDK.<span class="title">getInstance</span><span class="params">()</span>.<span class="title">destroySDK</span><span class="params">()</span>；


<span class="comment">/*
 * 游戏实现的回调监听接口
 */</span>
<span class="keyword">public</span> <span class="keyword">abstract</span> interface IDispatcherGameCallback </span>{
<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onLogin</span><span class="params">(UserInfoBean bean)</span></span>; <span class="comment">//登录回调监听</span>
<span class="function"><span class="keyword">public</span> RoleBean <span class="title">onRoleInfo</span><span class="params">()</span></span>;  <span class="comment">//支付获取游戏订单与信息接口</span>
<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onSwitchAccount</span><span class="params">()</span></span>;  <span class="comment">//切换账号接口</span>
<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onCloseSdkWindow</span><span class="params">(<span class="keyword">boolean</span> flag)</span></span>;  <span class="comment">//关闭sdk界面</span>
<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">exit</span><span class="params">()</span></span>;   <span class="comment">//退出</span>
<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onInitSuccess</span><span class="params">(<span class="keyword">boolean</span> isInit)</span></span>; <span class="comment">//初始化成功</span>
</code></pre><p>}</p>
<h2 id="五、接入具体流程">五、接入具体流程</h2><p><strong>注意:<br>①接入需按照下面的流程步骤，顺序展开<br>②在登录成功之后进入游戏时，需要调用绑定区服接口<br>PocketGamesSDK.getInstance().bindZone(zoneId,roleId,level)；</strong></p>
<ul>
<li>接入主类实现<em>IDispatcherGameCallback</em>接口<br></li>
<li><p>初始化准备</p>
<pre><code><span class="comment">// 设置调试模式是否开启</span>
PocketGamesSDK.getInstance().setDebug(<span class="literal">true</span>);<span class="comment">//此处true为开启</span>

<span class="comment">// 设置横竖屏</span>
PocketGamesSDK.getInstance().setDrection(PocketGamesSDK.PORTRAIT);

<span class="comment">// 设置游戏回调监听</span>
PocketGamesSDK.addGameListener(<span class="keyword">this</span>); 

<span class="comment">// 初始化sdk</span>
PocketGamesSDK.getInstance().initSDK(<span class="string">"http://sdk-test.changic.net.cn:8191/pocketgames/"</span>, <span class="number">1020</span>, <span class="string">"89646e72-f06e-4756-8352-cf779b7ea0ae"</span>, <span class="keyword">this</span>);
</code></pre></li>
<li><p>游戏悬浮框的实现</p>
<pre><code><span class="comment">// 注意：必须在activity这两个生命周期</span>

<span class="annotation">@Override</span>
<span class="keyword">public</span> <span class="function"><span class="keyword">void</span> <span class="title">onResume</span><span class="params">()</span> </span>{
    <span class="keyword">super</span>.onResume();
    PocketGamesSDK.getInstance().showGameBar();
}

<span class="annotation">@Override</span>
<span class="keyword">public</span> <span class="function"><span class="keyword">void</span> <span class="title">onPause</span><span class="params">()</span> </span>{
    <span class="keyword">super</span>.onPause();
    PocketGamesSDK.getInstance().closeGameBar();
}
</code></pre></li>
<li><p>游戏支付获取角色订单信息实现</p>
<pre><code><span class="comment">// 注意：每次回调这个接口，都需要重新获取最新的游戏订单号</span>

@Override
<span class="keyword">public</span> RoleBean onRoleInfo() {
    Random <span class="built_in">random</span> = <span class="keyword">new</span> Random();
    RoleBean roleBean = <span class="keyword">new</span> RoleBean();
    roleBean.setGameOrderId(<span class="keyword">String</span>.valueOf(<span class="built_in">random</span>.nextInt()));
    roleBean.setGameZoneId(<span class="string">"1001"</span>);
    roleBean.setRoleId(<span class="string">"xuchao"</span>);
    roleBean.setLevel(<span class="string">"99"</span>);

    <span class="comment">// 以下为特殊渠道用，如果在asstes下没有pocketgames_exinfo.properties文件，可不写</span>
    <span class="keyword">try</span> {
        Properties properties = <span class="keyword">new</span> Properties();
        properties.load(getApplicationContext().getAssets().<span class="built_in">open</span>(<span class="string">"pocketgames_exinfo.properties"</span>));
        <span class="keyword">String</span> exInfo = properties.getProperty(<span class="string">"exInfo"</span>);
        roleBean.setExinfo(exInfo);
    } <span class="keyword">catch</span> (IOException e) {
        <span class="comment">// TODO Auto-generated catch block</span>
        e.printStackTrace();
    }
    <span class="keyword">return</span> roleBean;
}    
</code></pre></li>
<li><p>登录的实现</p>
<pre><code><span class="comment">//注意：如果游戏登陆和初始化是异步的，那么需要用以下方法，如果不是则在登陆接口直接调用sdk登陆即可</span>

<span class="keyword">private</span> <span class="keyword">boolean</span> sdkInit =<span class="keyword">false</span>;

<span class="annotation">@Override</span>
<span class="keyword">public</span> <span class="function"><span class="keyword">void</span> <span class="title">onInitSuccess</span><span class="params">(<span class="keyword">final</span> <span class="keyword">boolean</span> isInit)</span> </span>{
    sdkInit = isInit;
    <span class="keyword">handler</span>.sendEmptyMessage(<span class="number">0</span>);
}

<span class="comment">// 比如这是游戏登陆的方法</span>
<span class="keyword">public</span> <span class="function"><span class="keyword">void</span> <span class="title">doLogin</span><span class="params">()</span></span>{
    <span class="comment">//PocketGamesSDK.getInstance().autoLogin();  //非异步则直接调用登陆即可</span>
    <span class="keyword">handler</span>.sendEmptyMessage(<span class="number">0</span>);
}

Handler <span class="keyword">handler</span> = <span class="keyword">new</span> Handler(){
    <span class="keyword">public</span> <span class="function"><span class="keyword">void</span> <span class="title">handleMessage</span><span class="params">(android.os.Message msg)</span> </span>{
        <span class="keyword">if</span>(msg.what == <span class="number">0</span>){
            <span class="keyword">if</span>(sdkInit){
                <span class="comment">//自动登录</span>
                PocketGamesSDK.getInstance().autoLogin();
            }
        }
    };
};
</code></pre></li>
</ul>

    </section>

    
  </article>


            <footer class="footer">
    <span class="footer__copyright">&copy; 2014. All rights reserved.</span>
    <span class="footer__copyright"><a href="http://uno.daleanthony.com" title="link to page for Uno Ghost theme">Uno theme</a> by <a href="http://daleanthony.com" title="link to website for Dale-Anthony">Dale-Anthony</a> | Redesign by <a href="http://letiantian.me" title="">樂天</a></span>
</footer>
        </div>
    </div>

    <!-- The main JavaScript file for Casper -->
    <script src="/js/main.js"></script>
    <script src="/js/scale.fix.js"></script>
    <script src="/js/jquery.imagesloaded.min.js"></script>
    <script src="/js/gallery.js"></script>
    <script src="/js/jquery.githubRepoWidget.min.js"></script>
    <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/x-mathjax-config"> 
      MathJax.Hub.Config({ 
        tex2jax: {inlineMath: [['[latex]','[/latex]'], ['\\(','\\)']]} 
    }); 
    </script>

    <!--kill ie6 -->
    <!--[if IE 6]>
      <script src="//letskillie6.googlecode.com/svn/trunk/2/zh_CN.js"></script>
    <![endif]-->

    <!--  google analytics -->
    <script>
      // add your google analytics code here
    </script>

    <!-- totop -->
    <div id="totop" style="position:fixed;bottom:50px;right:30px;cursor: pointer;">
    <a title="back to top"><img style="width:30px;height:30px;" src="/images/totop.png"/></a>
    </div>
    <script>
    (function($) { 
      var upperLimit = 100;
      var scrollElem = $('#totop');
      var scrollSpeed = 500; 
      scrollElem.hide();
      $(window).scroll(function () {            
        var scrollTop = $(document).scrollTop();       
        if ( scrollTop > upperLimit ) {
          $(scrollElem).stop().fadeTo(300, 1); // fade back in           
        }else{       
          $(scrollElem).stop().fadeTo(300, 0); // fade out
        }
      });
      $(scrollElem).click(function(){
        $('html, body').animate({scrollTop:0}, scrollSpeed); return false;
      });
    })(jQuery);
    </script>

    <!-- fancybox -->
    
    <link rel="stylesheet" href="/fancybox/jquery.fancybox.css" media="screen" type="text/css">
    <script src="/fancybox/jquery.fancybox.pack.js"></script>
    <script type="text/javascript">
      (function($){
        $('.fancybox').fancybox();
      })(jQuery);
    </script>
    

    <script src="//cdn.bootcss.com/highlight.js/8.5/highlight.min.js"></script>
    <script >hljs.initHighlightingOnLoad();</script>

</body>
</html>
